<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Editable Tree - jQuery EasyUI Demo</title>
    <link rel="stylesheet" type="text/css" href="../../easyui/1.3.4/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="../../easyui/1.3.4/themes/icon.css">
    <link rel="stylesheet" type="text/css" href="../../easyui/1.3.4/demo/demo.css">
    <link rel="stylesheet" href="../../kindeditor/themes/default/default.css" />
    <script type="text/javascript" src="../../js/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="../../easyui/1.3.4/jquery.easyui.min.js"></script>
    <script src="../../kindeditor/kindeditor-all.js"></script>
    <script src="../../kindeditor/kindeditor-all-min.js"></script>
    <script charset="utf-8" src="../../kindeditor/lang/zh-CN.js"></script>

</head>
<body>
<h2>Client Side Pagination in DataGrid</h2>
<div class="demo-info">
    <div class="demo-tip icon-tip"></div>
    <div>This sample shows how to implement client side pagination in DataGrid.</div>
</div>
<div style="margin:10px 0;">
    <form id="fm" method="post" style="margin-top: 20px; margin-left: 20px;" action="/management/consultation/updateConsultation">
        <input id="consulId" name="consulId"  type="hidden"  class="easyui-textbox" editable="false" />
        <div class="fitem">
            <label>所属菜单:</label>
            <input  id="columnId" name="columnId" style="" class="easyui-textbox" editable="false" />
        </div>
        <div class="fitem">
            <label>标题:</label>
            <input id="title" name="title" class="easyui-textbox" editable="false" />
        </div>

        <div class="fitem">
            <label>描述:</label>
            <input  id="consuDesc" name="consuDesc" class="easyui-textbox" editable="false" />
        </div>

        <div class="fitem">
            <label>类型:</label>
            <input  id="consuType" name="consuType" class="easyui-textbox" editable="false" />
        </div>

        <div class="fitem">
            <label>类别:</label>
            <input  id="consuClass" name="consuClass" class="easyui-textbox"  />
        </div>
        <div class="fitem">
            <label>位置:</label>
            <input  id="consuPlace" name="consuPlace" style="width: 160px; height: 65px;" class="easyui-textbox" data-options="multiline:true" />
        </div>
        <div class="fitem">
            <label>链接:</label>
            <input   id="consuLink" name="consuLink" style="width: 160px; height: 65px;" class="easyui-textbox" data-options="multiline:true" />
        </div>
        <div class="fitem">
            <label>文章内容:</label>
            <textarea rows="3" style="width:400px;" id="context" name="context" class="easyui-validatebox" data-options="required:true,validType:'length[1,1000000]'" invalidMessage="最大长度不能超过1000000"></textarea>
        </div>
        <div class="fitem">
            <label>备注:</label>
            <input  id="remarks"  name="remarks" style="width: 160px; height: 65px;" class="easyui-textbox" data-options="multiline:true" />
        </div>
        <div id="dlg-buttons1" style="display: block">
            <a id="confirm1" href="javascript:void(0)" class="easyui-linkbutton c6" iconcls="icon-ok" onclick="updateConsultation()" style="width: 90px">提交</a>
        </div>
    </form>
</div>
<script>
        var editor;
        $(function() {
            editor = KindEditor.create('textarea[name="context"]',{
                resizeType : 1,
                width:"100%",
                height:"200px",
                allowPreviewEmoticons:false,
                allowImageUpload:true,//允许上传图片
                allowFileManager:true, //允许对上传图片进行管理
                uploadJson:'../../kindeditor/jsp/upload_json.jsp', //上传图片的java代码，只不过放在jsp中
                fileManagerJson:'../../kindeditor/jsp/file_manager_json.jsp',
                afterUpload:function(){this.sync();}, //图片上传后，将上传内容同步到textarea中
                afterBlur:function(){this.sync();},   ////失去焦点时，将上传内容同步到textarea中
                items : [
                    'fontname','fontsize',
                    '|','forecolor',
                    'hilitecolor','bold',
                    'italic','underline',
                    'removeformat','|',
                    'justifyleft','justifycenter',
                    'justifyright','insertorderedlist',
                    'insertunorderedlist','|',
                    'emoticons','link','media','|','image'],
                afterChange:function(){
                    this.sync();
                },
                afterBlur:function(){
                    this.sync();
                }
            });
        var url = location.search;
        var consuId;
        if (url.indexOf("?") != -1) {
            var site = url.lastIndexOf("=");
            consuId=url.substring(site + 1, url.length);
        }
        voluation(consuId);
    });

    function voluation(consuId){
            alert(consuId);
        $.ajax({
            url:'/management/consultation/qryConsultationById',
            type:"POST",
            async:false,
            data:{consulId:consuId},
            success:function(data){
                /*return rows;*/
                alert(data);
                $("#columnId").val(data.columnId);
                $("#consulId").val(data.consulId);
                $("#title").val(data.title);
                $("#consuDesc").val(data.consuDesc);
                $("#consuType").val(data.consuType);
                $("#consuClass").val(data.consuClass);
                $("#consuPlace").val(data.consuPlace);
                $("#consuLink").val(data.consuLink);
                KindEditor.html("#context", data.context);
                $("#remarks").val(data.remarks);
            }
        });
    }

    function updateConsultation() {
        fm.submit();
    }
</script>
</body>
</html>